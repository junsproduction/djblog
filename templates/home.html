{% extends 'base.html' %}
{% load blog_extras %}

{% block title %}Juni's Blog - Web Development & Tech Insights{% endblock %}

{% block content %}
    <!-- Hero Section -->
    <section class="hero-section py-5 mb-5">
        <div class="container">
            <div class="row align-items-center min-vh-50">
                <div class="col-lg-8 mx-auto text-center">
                    <h1 class="hero-title display-4 fw-bold mb-4">
                        Welcome to <span class="text-primary">Juni's Blog</span>
                    </h1>
                    <p class="hero-subtitle lead mb-4 text-muted">
                        Sharing insights about web development, Django, coding journey, and tech adventures. 
                        Join me as I explore the world of programming and share what I learn along the way.
                    </p>
                    <div class="hero-stats mb-4">
                        <div class="row text-center">
                            <div class="col-md-4">
                                <div class="stat-item">
                                    <h3 class="fw-bold text-primary">{{ posts.count }}</h3>
                                    <p class="text-muted mb-0">Articles Published</p>
                                </div>
                            </div>
                            <div class="col-md-4">
                                <div class="stat-item">
                                    <h3 class="fw-bold text-success">{{ greeting }}</h3>
                                    <p class="text-muted mb-0">Current Status</p>
                                </div>
                            </div>
                            <div class="col-md-4">
                                <div class="stat-item">
                                    <h3 class="fw-bold text-info" id="clock"></h3>
                                    <p class="text-muted mb-0">Current Time</p>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="hero-actions">
                        <a href="#posts-section" class="btn btn-primary btn-lg me-3">
                            <i class="bi bi-book-open"></i> Read Latest Posts
                        </a>
                        {% if user.is_authenticated %}
                            <a href="{% url 'post-new' %}" class="btn btn-outline-primary btn-lg">
                                <i class="bi bi-plus-circle"></i> Write New Post
                            </a>
                        {% else %}
                            <a href="{% url 'login' %}" class="btn btn-outline-primary btn-lg">
                                <i class="bi bi-person-plus"></i> Join the Community
                            </a>
                        {% endif %}
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- Posts Section -->
    <section id="posts-section" class="posts-section">
        <div class="container">
            <div class="row mb-4">
                <div class="col-12">
                    <h2 class="section-title fw-bold mb-3">
                        <i class="bi bi-journal-text text-primary"></i> Latest Articles
                    </h2>
                    <p class="text-muted">Discover the latest insights, tutorials, and thoughts from my coding journey.</p>
                </div>
            </div>
    {% for post in posts %}
    <div class="card post-card mb-4">
        {% if post.image %}
        <img src="{{ post.image.url }}" class="card-img-top post-image" alt="{{ post.title }}">
        {% endif %}
        <div class="card-body">
            <div class="d-flex align-items-center mb-2">
                <img src="{{ post.author.profile_picture.url|default:'/static/images/default-avatar.png' }}" class="avatar me-2" alt="{{ post.author.full_name }}">
                <div>
                    <span class="author-name fw-semibold">{{ post.author.full_name }}</span>
                    <span class="text-muted small ms-2">{{ post.date_posted|date:"M d, Y" }} â€¢ {{ post.content|reading_time }}</span>
                </div>
                <span class="badge bg-light text-dark ms-auto border category-badge">{{ post.category.name }}</span>
            </div>
            <h5 class="card-title mb-2">{{ post.title }}</h5>
            <p class="card-text text-muted mb-3">
                <em>{{ post.content|truncatewords:30 }}</em>
            </p>
            <a href="{% url 'post-detail' post.id %}" class="btn btn-outline-primary btn-sm">Read More</a>
        </div>
    </div>
    {% empty %}
            <div class="col-12">
                <div class="text-center py-5">
                    <i class="bi bi-journal-x display-1 text-muted mb-3"></i>
                    <h3 class="text-muted">No posts available yet</h3>
                    <p class="text-muted">Be the first to share your thoughts!</p>
                    {% if user.is_authenticated %}
                        <a href="{% url 'post-new' %}" class="btn btn-primary">
                            <i class="bi bi-plus-circle"></i> Write First Post
                        </a>
                    {% endif %}
                </div>
            </div>
            {% endfor %}
        </div>
    </section>
    
    <script>
        function updateClock() {
            const now = new Date();
            const options = { hour: '2-digit', minute: '2-digit', second: '2-digit' };
            document.getElementById('clock').textContent = now.toLocaleTimeString([], options);
        }
        setInterval(updateClock, 1000);
        updateClock(); // Initial call to set the clock immediately
        
        // Smooth scrolling for anchor links
        document.querySelectorAll('a[href^="#"]').forEach(anchor => {
            anchor.addEventListener('click', function (e) {
                e.preventDefault();
                document.querySelector(this.getAttribute('href')).scrollIntoView({
                    behavior: 'smooth'
                });
            });
        });
    </script>
{% endblock %}
