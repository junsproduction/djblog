{% extends 'base.html' %}

{% block title %}Juni's Blog - Web Development & Tech Insights{% endblock %}

{% block content %}
    <!-- Hero Section -->
    <section class="hero-section py-5 mb-5">
        <div class="container">
            <div class="row align-items-center min-vh-50">
                <div class="col-lg-8 mx-auto text-center">
                    <h1 class="hero-title display-4 fw-bold mb-4">
                        Welcome to <span class="text-primary">Juni's Blog</span>
                    </h1>
                    <p class="hero-subtitle lead mb-4 text-muted">
                        Sharing insights about web development, Django, coding journey, and tech adventures. 
                        Join me as I explore the world of programming and share what I learn along the way.
                    </p>
                    <div class="hero-stats mb-4">
                        <div class="row text-center">
                            <div class="col-md-4">
                                <div class="stat-item">
                                    <h3 class="fw-bold text-primary">{{ posts.count }}</h3>
                                    <p class="text-muted mb-0">Articles Published</p>
                                </div>
                            </div>
                            <div class="col-md-4">
                                <div class="stat-item">
                                    <h3 class="fw-bold text-success">{{ greeting }}</h3>
                                    <p class="text-muted mb-0">Current Status</p>
                                </div>
                            </div>
                            <div class="col-md-4">
                                <div class="stat-item">
                                    <h3 class="fw-bold text-info" id="clock"></h3>
                                    <p class="text-muted mb-0">Current Time</p>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="hero-actions">
                        <a href="#posts-section" class="btn btn-primary btn-lg me-3">
                            <i class="bi bi-book-open"></i> Read Latest Posts
                        </a>
                        {% if user.is_authenticated %}
                            <a href="{% url 'post-new' %}" class="btn btn-outline-primary btn-lg">
                                <i class="bi bi-plus-circle"></i> Write New Post
                            </a>
                        {% else %}
                            <a href="{% url 'login' %}" class="btn btn-outline-primary btn-lg">
                                <i class="bi bi-person-plus"></i> Join the Community
                            </a>
                        {% endif %}
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- Posts Section -->
    <section id="posts-section" class="posts-section">
        <div class="container">
            <div class="row mb-4">
                <div class="col-12">
                    <h2 class="section-title fw-bold mb-3">
                        <i class="bi bi-journal-text text-primary"></i> Latest Articles
                    </h2>
                    <p class="text-muted">Discover the latest insights, tutorials, and thoughts from my coding journey.</p>
                </div>
            </div>
    {% for post in posts %}
    <div class="card mb-3 shadow-sm">
        <div class="row g-0">
            {% if post.image %}
            <div class="col-md-4">
                <img src="{{ post.image.url }}" 
                     class="img-fluid rounded-start" 
                     alt="{{ post.title }}"
                     style="object-fit: cover; height: 100%; width: 100%;">
            </div>
            {% endif %}
            <div class="{% if post.image %}col-md-8{% else %}col-md-12{% endif %}">
                <div class="card-body">
                    <h5 class="card-title">{{ post.title }}</h5>
                    
                    <!-- Category Badge -->
                    <span class="badge bg-secondary mb-2">{{ post.category.name }}</span>
                    
                    {% if user.is_staff %}
                        {% if post.status == 'published' %}
                            <span class="badge bg-success ms-2">Published</span>
                        {% elif post.status == 'pending' %}
                            <span class="badge bg-warning text-dark ms-2">Pending Review</span>
                        {% elif post.status == 'rejected' %}
                            <span class="badge bg-danger ms-2">Rejected</span>
                        {% else %}
                            <span class="badge bg-secondary ms-2">Draft</span>
                        {% endif %}
                    {% endif %}
                    
                    <p class="card-text text-muted">
                        <small>
                            Posted on {{ post.date_posted|date:"F j, Y" }}
                            {% if post.edited_at %}
                            â€¢ Edited {{ post.edited_at|date:"F j, Y" }}
                            {% endif %}
                            by {{ post.author.full_name }}
                        </small>
                    </p>
                    
                    <p class="card-text">
                        <em>{{post.content|truncatewords:30 }}</em>
                    </p>
                    
                    <a href="{% url 'post-detail' post.id %}" class="btn btn-primary">Read More</a>
                </div>
            </div>
        </div>
    </div>
    {% empty %}
            <div class="col-12">
                <div class="text-center py-5">
                    <i class="bi bi-journal-x display-1 text-muted mb-3"></i>
                    <h3 class="text-muted">No posts available yet</h3>
                    <p class="text-muted">Be the first to share your thoughts!</p>
                    {% if user.is_authenticated %}
                        <a href="{% url 'post-new' %}" class="btn btn-primary">
                            <i class="bi bi-plus-circle"></i> Write First Post
                        </a>
                    {% endif %}
                </div>
            </div>
            {% endfor %}
        </div>
    </section>
    
    <script>
        function updateClock() {
            const now = new Date();
            const options = { hour: '2-digit', minute: '2-digit', second: '2-digit' };
            document.getElementById('clock').textContent = now.toLocaleTimeString([], options);
        }
        setInterval(updateClock, 1000);
        updateClock(); // Initial call to set the clock immediately
        
        // Smooth scrolling for anchor links
        document.querySelectorAll('a[href^="#"]').forEach(anchor => {
            anchor.addEventListener('click', function (e) {
                e.preventDefault();
                document.querySelector(this.getAttribute('href')).scrollIntoView({
                    behavior: 'smooth'
                });
            });
        });
    </script>
{% endblock %}
